---
---

<div class="view-toggle">
  <button type="button" data-view="grid" class="toggle-btn active" title="Grid view">
    <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect x="2" y="2" width="5" height="5" rx="1" stroke="currentColor" stroke-width="1.5"/>
      <rect x="11" y="2" width="5" height="5" rx="1" stroke="currentColor" stroke-width="1.5"/>
      <rect x="2" y="11" width="5" height="5" rx="1" stroke="currentColor" stroke-width="1.5"/>
      <rect x="11" y="11" width="5" height="5" rx="1" stroke="currentColor" stroke-width="1.5"/>
    </svg>
  </button>
  <button type="button" data-view="list" class="toggle-btn" title="List view">
    <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M2 4h14M2 9h14M2 14h14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
    </svg>
  </button>
</div>

<script is:inline>
  document.addEventListener('DOMContentLoaded', function() {
    const toggleBtns = document.querySelectorAll('[data-view]');
    const listView = document.querySelector('[data-layout="list"]');
    const gridView = document.querySelector('[data-layout="grid"]');

    function switchView(showView, hideView) {
      if (!showView || !hideView) return;

      // Fade out current view
      hideView.classList.add('fade-out');
      hideView.classList.remove('fade-in', 'animate-now');

      setTimeout(function() {
        hideView.style.display = 'none';
        hideView.classList.remove('fade-out');

        // Fade in new view with stagger animation
        showView.style.display = '';
        showView.classList.add('fade-in', 'stagger-animate', 'animate-now');
        showView.classList.remove('fade-out');
      }, 150);
    }

    toggleBtns.forEach(function(btn) {
      btn.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();

        const view = btn.getAttribute('data-view');

        // Update active state
        toggleBtns.forEach(function(b) { b.classList.remove('active'); });
        btn.classList.add('active');

        // Toggle views with animation
        if (view === 'list') {
          switchView(listView, gridView);
        } else {
          switchView(gridView, listView);
        }

        return false;
      });
    });
  });
</script>

<style>
  .view-toggle {
    display: flex;
    gap: var(--space-xs);
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    padding: var(--space-xs);
  }

  .toggle-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    background: transparent;
    border: none;
    border-radius: var(--radius-sm);
    color: var(--text-muted);
    cursor: pointer;
    transition: all var(--transition-fast);
  }

  .toggle-btn:hover {
    color: var(--text-soft);
    background: var(--bg-elevated);
  }

  .toggle-btn.active {
    color: var(--accent);
    background: var(--accent-glow);
  }
</style>
